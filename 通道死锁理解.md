# 通道死锁理解

```go
import "fmt"
/*
发生通道死锁
*/
func main() {
	out := make(chan int)
	out <- 2
	//主协程在此处阻塞，因此后续操作无法执行，也就是说后续协程无法创建，协程不存在！！！
	//自然主协程发生非正常永久性阻塞，即死锁。。。
	go f2(out)
}

func f2(in chan int) {
	fmt.Println(<-in)
}
```

```go
import (
	"fmt"
	"time"
)
/*
正确，不会发生通道死锁
*/
func main() {
	out := make(chan int)
	go f1(out) //开启协程（通道是引用），因为协程里面的channel买油介绍到数据，因此协程在此处会阻塞
	out <- 2//主协程将数据传入管道，因此协程阻塞结束。但是需要主协程睡眠一段时间，否则可能由于主协程提前退出导致协程没有输出
	time.Sleep(time.Microsecond)
}
func f1(in chan int) {
	fmt.Println(<-in)
}
```

